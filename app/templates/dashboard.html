{% extends "base.html" %}
{% block content %}

<h3>Add New Task</h3>

<form method="POST" action="{{ url_for('main.add') }}">
    <input type="text" name="title" placeholder="Task title" required>

    <input type="datetime-local" name="due_date" required>

    <button type="submit">Add Task</button>
</form>

<hr>

<h3>Your Tasks</h3>

<table border="1" cellpadding="8">
    <tr>
        <th>Task</th>
        <th>Due Date</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>

    {% for todo in todos %}
    <tr>
        <td>{{ todo.title }}</td>
        <td>{{ todo.due_date.strftime('%d-%m-%Y %H:%M') }}</td>
        <td>
            {% if todo.status == 'Completed' %}
                ✅ Completed
            {% else %}
                ⏳ Pending
            {% endif %}
        </td>
        <td>
            {% if todo.status == 'Pending' %}
                <a href="{{ url_for('main.complete', id=todo.id) }}">Complete</a>
            {% else %}
                <a href="{{ url_for('main.pending', id=todo.id) }}">Mark Pending</a>
            {% endif %}
            |
            <a href="{{ url_for('main.delete', id=todo.id) }}" onclick="return confirm('Delete task?')">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
